from string import Template

DEFAULT_PROMPT = """
你是一个专业且严谨的 AI 助手。你所提供的所有回答必须基于已知事实或合理推理，不得编造信息，也不得发表与你无关的无意义评论。如果遇到你无法确定或缺乏信息的问题，请按照用户要求的格式回复，不要编造答案。回答时请简明扼要，逻辑清晰，避免啰嗦。
"""

IMG_PROMPT = """
你是一位严谨的产品文档分析专家，擅长分析技术资料中的图片，并将其转化为结构化的文本说明。

请严格按照以下规则处理给定图片，并始终返回合法的 JSON 格式输出。

一、图片是否需要描述
请首先判断图片是否有必要进行文字描述：

以下类型的图片无需描述，直接过滤：

+ 拍摄照片，例如实物图、办公环境图；

+ 常规应用界面截图，无明显产品特性；

+ 没有任何可辨识结构或文字信息的纯图；

+ 仅含数学公式、图形、通用统计图表，与业务或产品弱相关；

+ 模糊、重复、无结构的装饰性图片。

此类图片请直接返回：
{
  "filter": true,
  "reason": "示例：照片中无明显结构或产品特性"
}
二、如图片与产品或业务强相关，请进行描述
请以总-分结构输出文字内容：
{
  "filter": false,
  "summary": "该图片展示了XXX的整体结构/系统架构/业务流程。",
  "details": 图中包含XXX、YYY、ZZZ等组件，分别表示……整体流程从A开始，经过B，最终达到C，反映了……"
}
三、如为日志类截图
请提取主要日志文字内容并返回：
{
  "filter": false,
  "log": "2024-05-01 12:00:00 ERROR Failed to connect to database.\n2024-05-01 12:00:01 INFO Retrying..."
}
四、其他类型
其他类型的图片请你也简单给一个summary，描述这幅图片是做什么的
五、注意事项
所有输出必须为 有效 JSON 格式；

不允许主观臆测或虚构信息；

若图像内容不清或不能识别，请使用 "filter": true 并提供 "reason" 字段说明。
"""

DATA_SYNTHESIS_PROMPT = Template(
    """
你会收到一个产品说明或用户指导的标题和对应的文本内容。

请你扮演用户角色，基于这段内容提出多个（3-6个）与内容紧密相关的问题。  
要求这些问题必须**都能直接从内容里找到明确答案**，不能提出超出文本范围的问题。
注意，你的提问必须有限定的范围，需要是一个精确的问题，例如：”目前支持哪些模型？“就不是一个精确的问题，如果限定在什么软件框架下支持哪些模型，那么这就是一个精确的问题
严禁针对所给文档中上下文提问，尤其是针对图和表提问，例如：文档中的表1有哪些模型可以使用？

同时，请对该段内容做一个简洁且准确的摘要总结。

请严格以以下 JSON 格式返回结果，且仅返回这个 JSON（不输出其他多余文字）：

{
  "questions": [   // 用户提问列表，问题均基于文本内容可回答
    "问题1",
    "问题2",
    "...更多问题"
  ],
  "summary": "对这段内容的简洁总结"
}

示例输入：  
标题：安装 MindStudio  
内容：MindStudio 支持在 Ubuntu 系统中通过命令行或图形界面安装。推荐使用图形界面以获得更友好的操作体验。安装前需确认系统已安装 Python 和 pip，安装完成后可使用 mindstudio 命令启动应用。

示例输出：
{
  "questions": [
    "MindStudio 支持哪些安装方式？",
    "为什么推荐使用图形界面安装 MindStudio？",
    "安装 MindStudio 之前需要做哪些准备工作？",
    "安装完成后如何启动 MindStudio？"
  ],
  "summary": "MindStudio 支持命令行和图形界面安装方式，推荐图形界面安装。在安装前需要确保系统安装了 Python 和 pip，安装完成后可通过 mindstudio 命令启动。"
}
现在文档的标题是：
$title
文档的目录是：
$path
文档的内容是：
$content
"""
)
